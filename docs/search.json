[{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Salmon Data Package Functions Workflow","text":"vignette demonstrates use metasalmon package create work Salmon Data Packages. Salmon Data Package Frictionless Data Package extended salmon-specific semantic fields (IRIs, concept schemes) make data portable, discoverable, linked DFO Salmon Ontology.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"quick-start-wrap-your-data-as-is","dir":"Articles","previous_headings":"","what":"Quick Start: Wrap Your Data As-Is","title":"Salmon Data Package Functions Workflow","text":"simplest workflow wrap existing analysis-ready tables Salmon Data Package minimal metadata.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"step-1-load-your-data","dir":"Articles","previous_headings":"Quick Start: Wrap Your Data As-Is","what":"Step 1: Load Your Data","title":"Salmon Data Package Functions Workflow","text":"","code":"library(metasalmon) library(readr)  # Load your data (example: NuSEDS coho sample) data_path <- system.file(\"extdata\", \"nuseds-fraser-coho-sample.csv\", package = \"metasalmon\") df <- read_csv(data_path, show_col_types = FALSE) head(df)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"step-2-infer-a-starter-dictionary","dir":"Articles","previous_headings":"Quick Start: Wrap Your Data As-Is","what":"Step 2: Infer a Starter Dictionary","title":"Salmon Data Package Functions Workflow","text":"infer_dictionary() function analyzes data frame proposes starter dictionary column types roles: creates dictionary tibble columns metadata, types, semantic fields (IRIs). semantic fields left blank fill manually GPT assistance (see GPT collaboration vignette).","code":"dict <- infer_dictionary(   df,   dataset_id = \"nuseds-fraser-coho-2024\",   table_id = \"escapement\" ) dict"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"step-3-validate-the-dictionary","dir":"Articles","previous_headings":"Quick Start: Wrap Your Data As-Is","what":"Step 3: Validate the Dictionary","title":"Salmon Data Package Functions Workflow","text":"using dictionary, validate : checks required columns exist, value types valid, duplicate column names. validation passes, ’re ready proceed.","code":"validate_dictionary(dict)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"step-4-apply-the-dictionary-optional","dir":"Articles","previous_headings":"Quick Start: Wrap Your Data As-Is","what":"Step 4: Apply the Dictionary (Optional)","title":"Salmon Data Package Functions Workflow","text":"can apply dictionary transform data (rename columns, coerce types, apply factor levels): step optional—can package data “-” without transformation.","code":"# Apply dictionary to transform data transformed_df <- apply_salmon_dictionary(df, dict) head(transformed_df)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"step-5-create-dataset-and-table-metadata","dir":"Articles","previous_headings":"Quick Start: Wrap Your Data As-Is","what":"Step 5: Create Dataset and Table Metadata","title":"Salmon Data Package Functions Workflow","text":"Create metadata tibbles describing dataset tables:","code":"# Dataset-level metadata dataset_meta <- tibble::tibble(   dataset_id = \"nuseds-fraser-coho-2024\",   title = \"NuSEDS Fraser River Coho Escapement Data (Sample)\",   description = \"Sample of coho salmon escapement data from PFMA 29\",   creator = \"DFO\",   contact_name = NA_character_,   contact_email = NA_character_,   license = \"Open Government License - Canada\",   temporal_start = \"2001\",   temporal_end = \"2024\",   spatial_extent = \"PFMA 29\",   dataset_type = \"monitoring\",   dataset_iri = NA_character_,   source_citation = NA_character_ )  # Table-level metadata table_meta <- tibble::tibble(   dataset_id = \"nuseds-fraser-coho-2024\",   table_id = \"escapement\",   file_name = \"escapement.csv\",   table_label = \"Escapement Data\",   description = \"Coho escapement counts and metadata\",   entity_type = NA_character_,   entity_iri = NA_character_,   primary_key = \"POP_ID\" )"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"step-6-create-the-salmon-data-package","dir":"Articles","previous_headings":"Quick Start: Wrap Your Data As-Is","what":"Step 6: Create the Salmon Data Package","title":"Salmon Data Package Functions Workflow","text":"Assemble everything package: package includes: - datapackage.json: Frictionless Data Package descriptor semantic extensions - Resource files (CSV): data tables","code":"# Prepare resources (named list of data frames) resources <- list(escapement = df)  # Create package pkg_path <- create_salmon_datapackage(   resources = resources,   dataset_meta = dataset_meta,   table_meta = table_meta,   dict = dict,   path = tempdir(),   format = \"csv\",   overwrite = TRUE )  # Check what was created list.files(pkg_path)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"step-7-read-the-package-back","dir":"Articles","previous_headings":"Quick Start: Wrap Your Data As-Is","what":"Step 7: Read the Package Back","title":"Salmon Data Package Functions Workflow","text":"Load package analysis:","code":"# Read package pkg <- read_salmon_datapackage(pkg_path)  # Access components pkg$dataset      # Dataset metadata pkg$tables      # Table metadata pkg$dictionary   # Column dictionary pkg$resources    # Data tables (named list)  # Use the data head(pkg$resources$escapement)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"guided-semantic-wrap-adding-iris-and-codes","dir":"Articles","previous_headings":"","what":"Guided Semantic Wrap: Adding IRIs and Codes","title":"Salmon Data Package Functions Workflow","text":"richer package, add semantic annotations (IRIs linking DFO Salmon Ontology) code lists (controlled vocabularies).","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"enriching-the-dictionary-with-iris","dir":"Articles","previous_headings":"Guided Semantic Wrap: Adding IRIs and Codes","what":"Enriching the Dictionary with IRIs","title":"Salmon Data Package Functions Workflow","text":"Edit dictionary add IRIs DFO Salmon Ontology:","code":"# Example: Add concept IRIs for species # Using DFO Salmon Ontology IRIs (https://w3id.org/gcdfos/salmon#) dict$concept_iri[dict$column_name == \"SPECIES\"] <- \"https://w3id.org/gcdfos/salmon#Stock\" dict$concept_scheme_iri[dict$column_name == \"SPECIES\"] <- \"https://w3id.org/gcdfos/salmon#SalmonOriginScheme\"  # Example: Link escapement measurements dict$concept_iri[dict$column_name == \"MAX_ESTIMATE\"] <- \"https://w3id.org/gcdfos/salmon#EscapementMeasurement\" dict$metric_iri[dict$column_name == \"MAX_ESTIMATE\"] <- \"https://w3id.org/gcdfos/salmon#RelativeAbundanceMetric\"  # Example: Link year fields dict$concept_iri[dict$column_name == \"BROOD_YEAR\"] <- \"https://w3id.org/gcdfos/salmon#BroodYear\" dict$concept_iri[dict$column_name == \"CATCH_YEAR\"] <- \"https://w3id.org/gcdfos/salmon#CatchYear\"  # Validate again validate_dictionary(dict, require_iris = FALSE)  # Set TRUE to require IRIs"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"adding-code-lists","dir":"Articles","previous_headings":"Guided Semantic Wrap: Adding IRIs and Codes","what":"Adding Code Lists","title":"Salmon Data Package Functions Workflow","text":"Create codes tibble categorical fields:","code":"codes <- tibble::tibble(   dataset_id = \"nuseds-fraser-coho-2024\",   table_id = \"escapement\",   column_name = \"SPECIES\",   code_value = \"Coho\",   code_label = \"Coho Salmon (Oncorhynchus kisutch)\",   concept_scheme_iri = \"https://w3id.org/gcdfos/salmon#SalmonOriginScheme\",   concept_iri = \"https://w3id.org/gcdfos/salmon#Stock\" )  # Apply dictionary with codes to get factor levels transformed_df <- apply_salmon_dictionary(df, dict, codes = codes)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"creating-the-enriched-package","dir":"Articles","previous_headings":"Guided Semantic Wrap: Adding IRIs and Codes","what":"Creating the Enriched Package","title":"Salmon Data Package Functions Workflow","text":"Create package codes:","code":"pkg_path <- create_salmon_datapackage(   resources = resources,   dataset_meta = dataset_meta,   table_meta = table_meta,   dict = dict,   codes = codes,  # Include codes   path = tempdir(),   format = \"csv\",   overwrite = TRUE )"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"best-practices","dir":"Articles","previous_headings":"","what":"Best Practices","title":"Salmon Data Package Functions Workflow","text":"Start simple: Use infer_dictionary() bootstrap, manually enrich semantic fields. Validate early: Run validate_dictionary() creating packages. Keep data -: don’t need transform data unless want ; packaging preserves original structure. Use codes categoricals: Code lists ensure consistent values enable factor levels R. https://w3id.org/gcdfos/salmon#ConservationUnit - Conservation Units https://w3id.org/gcdfos/salmon#Stock - Stock entities https://w3id.org/gcdfos/salmon#EscapementMeasurement - Escapement measurements https://w3id.org/gcdfos/salmon#BroodYear - Brood year references https://w3id.org/gcdfos/salmon#CatchYear - Catch year references https://w3id.org/gcdfos/salmon#WSPBiologicalStatusZoneScheme - Status zone scheme (Green/Amber/Red) https://w3id.org/gcdfos/salmon#SalmonOriginScheme - Origin scheme (natural/hatchery) See full ontology https://w3id.org/gcdfos/salmon available terms","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/functions-workflow.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Salmon Data Package Functions Workflow","text":"See GPT collaboration vignette using AI assistance propose dictionaries IRIs. Explore datapackage.json file understand Frictionless Data Package structure. Check DFO Salmon Ontology repository available terms IRIs.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Collaborating with GPT for Salmon Data Packages","text":"vignette shows collaborate GPT (LLMs) propose semantic data dictionaries, IRIs, code lists, metadata Salmon Data Packages. workflow combines AI assistance deterministic R functions metasalmon powerful, reproducible pipeline.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"workflow-overview","dir":"Articles","previous_headings":"","what":"Workflow Overview","title":"Collaborating with GPT for Salmon Data Packages","text":"Bootstrap: Use infer_dictionary() create starter dictionary data. Prompt GPT: Send dictionary data sample GPT focused prompt. Extract: Copy GPT’s suggested IRIs, descriptions, codes dictionary. Validate: Use validate_dictionary() ensure everything correct. Package: Create Salmon Data Package enriched semantics.","code":""},{"path":[]},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"step-1-prepare-your-data-and-starter-dictionary","dir":"Articles","previous_headings":"Step-by-Step Guide","what":"Step 1: Prepare Your Data and Starter Dictionary","title":"Collaborating with GPT for Salmon Data Packages","text":"","code":"library(metasalmon) library(readr)  # Load your data data_path <- system.file(\"extdata\", \"nuseds-fraser-coho-sample.csv\", package = \"metasalmon\") df <- read_csv(data_path, show_col_types = FALSE)  # Create starter dictionary dict <- infer_dictionary(   df,   dataset_id = \"nuseds-fraser-coho-2024\",   table_id = \"escapement\" )  # Show a sample for GPT head(df, 5) dict"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"step-2-craft-a-gpt-prompt","dir":"Articles","previous_headings":"Step-by-Step Guide","what":"Step 2: Craft a GPT Prompt","title":"Collaborating with GPT for Salmon Data Packages","text":"Create prompt asks GPT : - Propose column descriptions - Suggest IRIs DFO Salmon Ontology - Identify categorical fields need code lists - Propose controlled vocabulary values Example prompt:","code":"I'm creating a Salmon Data Package for coho escapement data. Here's my data sample and starter dictionary:  Data sample (first 5 rows): [Paste head(df) output]  Dictionary: [Paste dict output]  Please help me enrich this dictionary by: 1. Writing clear, biologist-friendly descriptions for each column 2. Suggesting IRIs from the DFO Salmon Ontology (or appropriate vocabularies) for:    - concept_iri: the specific concept this column represents    - concept_scheme_iri: the controlled vocabulary scheme    - metric_iri: if this is a measurement/metric    - dimension_iri: if this is a dimension 3. Identifying which columns should have code lists (categorical fields) 4. Proposing code values and labels for categorical fields  Return the enriched dictionary as a CSV or R code that I can copy into my R session."},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"step-3-extract-gpts-suggestions","dir":"Articles","previous_headings":"Step-by-Step Guide","what":"Step 3: Extract GPT’s Suggestions","title":"Collaborating with GPT for Salmon Data Packages","text":"GPT return enriched dictionary rows possibly code lists. Copy R:","code":"# Example: GPT suggests descriptions and IRIs # You would copy GPT's suggestions here  # Update dictionary with GPT's suggestions using DFO Salmon Ontology IRIs dict$column_description[dict$column_name == \"SPECIES\"] <- \"Salmon species name\" dict$concept_iri[dict$column_name == \"SPECIES\"] <- \"https://w3id.org/gcdfos/salmon#Stock\" dict$concept_scheme_iri[dict$column_name == \"SPECIES\"] <- \"https://w3id.org/gcdfos/salmon#SalmonOriginScheme\"  # Example: Link escapement measurements dict$concept_iri[dict$column_name == \"MAX_ESTIMATE\"] <- \"https://w3id.org/gcdfos/salmon#EscapementMeasurement\" dict$metric_iri[dict$column_name == \"MAX_ESTIMATE\"] <- \"https://w3id.org/gcdfos/salmon#RelativeAbundanceMetric\"  # GPT might also suggest code lists codes <- tibble::tibble(   dataset_id = \"nuseds-fraser-coho-2024\",   table_id = \"escapement\",   column_name = \"SPECIES\",   code_value = \"Coho\",   code_label = \"Coho Salmon (Oncorhynchus kisutch)\",   concept_scheme_iri = \"https://w3id.org/gcdfos/salmon#SalmonOriginScheme\",   concept_iri = \"https://w3id.org/gcdfos/salmon#Stock\" )"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"step-4-validate-and-refine","dir":"Articles","previous_headings":"Step-by-Step Guide","what":"Step 4: Validate and Refine","title":"Collaborating with GPT for Salmon Data Packages","text":"Always validate GPT’s suggestions:","code":"# Validate dictionary validate_dictionary(dict, require_iris = FALSE)  # Check for any issues GPT might have introduced # (e.g., invalid IRIs, wrong types)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"step-5-create-your-package","dir":"Articles","previous_headings":"Step-by-Step Guide","what":"Step 5: Create Your Package","title":"Collaborating with GPT for Salmon Data Packages","text":"Use enriched dictionary codes:","code":"# Prepare metadata (you can also ask GPT to help draft this) dataset_meta <- tibble::tibble(   dataset_id = \"nuseds-fraser-coho-2024\",   title = \"NuSEDS Fraser River Coho Escapement Data\",   description = \"Escapement monitoring data for coho salmon in PFMA 29\",   # ... other fields )  table_meta <- tibble::tibble(   dataset_id = \"nuseds-fraser-coho-2024\",   table_id = \"escapement\",   file_name = \"escapement.csv\",   table_label = \"Escapement Data\",   # ... other fields )  # Create package resources <- list(escapement = df) pkg_path <- create_salmon_datapackage(   resources,   dataset_meta,   table_meta,   dict,   codes = codes,   path = tempdir(),   format = \"csv\",   overwrite = TRUE )"},{"path":[]},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"template-1-dictionary-enrichment","dir":"Articles","previous_headings":"Advanced: GPT Prompt Templates","what":"Template 1: Dictionary Enrichment","title":"Collaborating with GPT for Salmon Data Packages","text":"","code":"I have a salmon monitoring dataset with the following columns: [list columns].  For each column, please: 1. Write a clear description (1-2 sentences) 2. Suggest the appropriate DFO Salmon Ontology IRI (concept_iri) from https://w3id.org/gcdfos/salmon#    - Common classes: ConservationUnit, Stock, EscapementMeasurement, BroodYear, CatchYear    - See the ontology for all available terms 3. Identify the concept scheme (concept_scheme_iri) from available schemes:    - WSPBiologicalStatusZoneScheme (Green/Amber/Red zones)    - SalmonOriginScheme (natural/hatchery origin)    - EnumerationMethodScheme, EstimateMethodScheme, EstimateTypeScheme    - COSEWICStatusScheme, StockStatusZoneScheme, etc. 4. Determine if it's a measurement (metric_iri) or dimension (dimension_iri)  Return as an R tibble I can copy-paste."},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"template-2-code-list-generation","dir":"Articles","previous_headings":"Advanced: GPT Prompt Templates","what":"Template 2: Code List Generation","title":"Collaborating with GPT for Salmon Data Packages","text":"","code":"I have a categorical column \"[COLUMN_NAME]\" with values: [list unique values].  Please: 1. Create a controlled vocabulary (code list) with proper labels 2. Suggest IRIs for each code value 3. Identify the concept scheme IRI  Return as an R tibble matching the codes.csv schema."},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"template-3-metadata-generation","dir":"Articles","previous_headings":"Advanced: GPT Prompt Templates","what":"Template 3: Metadata Generation","title":"Collaborating with GPT for Salmon Data Packages","text":"","code":"I'm creating a Salmon Data Package for [describe your dataset].  Please help me draft: 1. Dataset title and description 2. Appropriate license 3. Temporal and spatial extent 4. Contact information format  Return as an R tibble matching the dataset.csv schema."},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"tips-for-effective-gpt-collaboration","dir":"Articles","previous_headings":"","what":"Tips for Effective GPT Collaboration","title":"Collaborating with GPT for Salmon Data Packages","text":"Provide context: Include sample data rows GPT understands domain. specific: Ask IRIs specific ontologies (DFO Salmon Ontology). Validate everything: Always run validate_dictionary() GPT suggestions. Iterate: Refine prompts based GPT’s responses. Keep deterministic: Use GPT suggestions, rely R functions validation packaging.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"future-automated-semantic-suggestion","dir":"Articles","previous_headings":"","what":"Future: Automated Semantic Suggestion","title":"Collaborating with GPT for Salmon Data Packages","text":"suggest_semantics() function placeholder future automated semantic suggestion. implemented, : - Use heuristics LLM APIs propose IRIs - Validate suggestions DFO Salmon Ontology - Provide confidence scores suggestions now, use manual GPT workflow described .","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"example-complete-workflow","dir":"Articles","previous_headings":"","what":"Example: Complete Workflow","title":"Collaborating with GPT for Salmon Data Packages","text":"","code":"# 1. Bootstrap dict <- infer_dictionary(df, dataset_id = \"my-dataset\", table_id = \"my-table\")  # 2. (Manual step: prompt GPT with dict and sample data)  # 3. Extract GPT suggestions (example) dict$column_description <- c(\"Species name\", \"Population count\", ...)  # From GPT dict$concept_iri <- c(\"https://w3id.org/gcdfos/salmon#Stock\", \"https://w3id.org/gcdfos/salmon#EscapementMeasurement\", ...)  # From GPT  # 4. Validate validate_dictionary(dict)  # 5. Create package create_salmon_datapackage(resources, dataset_meta, table_meta, dict, ...)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/gpt-collaboration.html","id":"resources","dir":"Articles","previous_headings":"","what":"Resources","title":"Collaborating with GPT for Salmon Data Packages","text":"Key classes: ConservationUnit, Stock, EscapementMeasurement, BroodYear, CatchYear Key schemes: WSPBiologicalStatusZoneScheme, SalmonOriginScheme, EnumerationMethodScheme Repository: https://github.com/dfo-pacific-science/salmon-ontology Frictionless Data Package spec: https://specs.frictionlessdata.io/data-package/ Custom GPT prompt template: See docs/context/custom-gpt-prompt.md","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/metasalmon.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Getting started with metasalmon","text":"metasalmon package helps salmon scientists wrap analysis-ready tables portable, ontology-aware Salmon Data Packages. Salmon Data Package Frictionless Data Package extended salmon-specific semantic fields (IRIs, concept schemes) link data DFO Salmon Ontology.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/metasalmon.html","id":"quick-example","dir":"Articles","previous_headings":"","what":"Quick Example","title":"Getting started with metasalmon","text":"","code":"library(metasalmon)  # Load your data df <- readr::read_csv(\"your-data.csv\")  # Infer a starter dictionary dict <- infer_dictionary(df, dataset_id = \"my-dataset\", table_id = \"my-table\")  # Validate it validate_dictionary(dict)  # Create a package resources <- list(main_table = df) dataset_meta <- tibble::tibble(   dataset_id = \"my-dataset\",   title = \"My Dataset\",   description = \"Description here\",   # ... other fields ) table_meta <- tibble::tibble(   dataset_id = \"my-dataset\",   table_id = \"main_table\",   file_name = \"main_table.csv\",   # ... other fields )  pkg_path <- create_salmon_datapackage(   resources, dataset_meta, table_meta, dict,   path = \"output-package\" )"},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/metasalmon.html","id":"learn-more","dir":"Articles","previous_headings":"","what":"Learn More","title":"Getting started with metasalmon","text":"Functions workflow: See vignette(\"functions-workflow\") detailed walkthrough GPT collaboration: See vignette(\"gpt-collaboration\") using AI assistance Package reference: Browse function documentation ?infer_dictionary","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/articles/metasalmon.html","id":"package-layout","dir":"Articles","previous_headings":"","what":"Package Layout","title":"Getting started with metasalmon","text":"R/: Core functions dictionary inference/validation, package creation/reading inst/extdata/: Example data files tests vignettes tests/testthat/: Automated tests vignettes/: Long-form documentation","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Brett Johnson. Author, maintainer.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Johnson B (2025). metasalmon: Metasalmon: Salmon Data Utilities. R package version 0.0.0.9000, https://dfo-pacific-science.github.io/metasalmon/.","code":"@Manual{,   title = {metasalmon: Metasalmon: Salmon Data Utilities},   author = {Brett Johnson},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://dfo-pacific-science.github.io/metasalmon/}, }"},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"metasalmon","dir":"","previous_headings":"","what":"metasalmon: Salmon Data Package Utilities","title":"metasalmon: Salmon Data Package Utilities","text":"R package creating portable, ontology-aware Salmon Data Packages. Wrap analysis-ready tables Frictionless Data Packages extended semantic fields (IRIs, concept schemes) link DFO Salmon Ontology.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"features","dir":"","previous_headings":"","what":"Features","title":"metasalmon: Salmon Data Package Utilities","text":"Dictionary inference: Automatically propose starter dictionaries data frames Dictionary validation: Validate dictionary schemas semantic fields Data transformation: Apply dictionaries rename columns, coerce types, apply factor levels Package creation: Assemble Frictionless Data Packages salmon-specific semantic extensions Package reading: Load packages back R tidy tibbles metadata","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick Start","title":"metasalmon: Salmon Data Package Utilities","text":"","code":"library(metasalmon)  # Load your data df <- readr::read_csv(\"your-data.csv\")  # Infer a starter dictionary dict <- infer_dictionary(df, dataset_id = \"my-dataset\", table_id = \"my-table\")  # Validate it validate_dictionary(dict)  # Create a package resources <- list(main_table = df) dataset_meta <- tibble::tibble(   dataset_id = \"my-dataset\",   title = \"My Dataset\",   description = \"Description here\" ) table_meta <- tibble::tibble(   dataset_id = \"my-dataset\",   table_id = \"main_table\",   file_name = \"main_table.csv\" )  pkg_path <- create_salmon_datapackage(   resources, dataset_meta, table_meta, dict,   path = \"output-package\" )"},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"data-package-format","dir":"","previous_headings":"","what":"Data Package Format","title":"metasalmon: Salmon Data Package Utilities","text":"Salmon Data Package Frictionless Data Package extended semantic fields link DFO Salmon Ontology.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"conceptual-structure","dir":"","previous_headings":"Data Package Format","what":"Conceptual Structure","title":"metasalmon: Salmon Data Package Utilities","text":"Components: datapackage.json: Package metadata resource schemas defining columns semantic IRIs CSV tables: Data files (one per resource) codes.csv: Optional code lists categorical fields Semantic IRIs: Links field schemas connecting columns DFO Salmon Ontology concepts","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"metasalmon: Salmon Data Package Utilities","text":"","code":"# Install from GitHub (once published) devtools::install_github(\"dfo-pacific-science/metasalmon\")"},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"metasalmon: Salmon Data Package Utilities","text":"Getting started: vignette(\"metasalmon\") Functions workflow: vignette(\"functions-workflow\") GPT collaboration: vignette(\"gpt-collaboration\")","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"dfo-salmon-ontology","dir":"","previous_headings":"","what":"DFO Salmon Ontology","title":"metasalmon: Salmon Data Package Utilities","text":"package links data DFO Salmon Ontology using semantic IRIs. Key ontology terms include: Classes: ConservationUnit, Stock, EscapementMeasurement, BroodYear, CatchYear Schemes: WSPBiologicalStatusZoneScheme (Green/Amber/Red zones), SalmonOriginScheme, EnumerationMethodScheme, EstimateMethodScheme Metrics: RelativeAbundanceMetric, LongTermTrendMetric, PercentChangeMetric See full ontology repository available terms.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"development","dir":"","previous_headings":"","what":"Development","title":"metasalmon: Salmon Data Package Utilities","text":"Install R (>= 4.4.0) required packages: Build check:","code":"install.packages(c(\"devtools\", \"roxygen2\", \"testthat\", \"knitr\", \"rmarkdown\",                     \"tibble\", \"readr\", \"jsonlite\", \"cli\", \"rlang\", \"dplyr\",                     \"tidyr\", \"purrr\", \"withr\", \"frictionless\")) devtools::document() devtools::test() devtools::check() devtools::build_vignettes() pkgdown::build_site()"},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"package-structure","dir":"","previous_headings":"","what":"Package Structure","title":"metasalmon: Salmon Data Package Utilities","text":"R/: Core functions dictionary package operations inst/extdata/: Example data files (NuSEDS coho sample) tests/testthat/: Automated tests vignettes/: Long-form documentation docs/: pkgdown site output","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/index.html","id":"roadmap","dir":"","previous_headings":"","what":"Roadmap","title":"metasalmon: Salmon Data Package Utilities","text":"Core dictionary package functions Tests vignettes Documentation DFO Salmon Ontology IRIs GPT/LLM integration semantic suggestion Additional export formats validators","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/apply_salmon_dictionary.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a salmon dictionary to a data frame — apply_salmon_dictionary","title":"Apply a salmon dictionary to a data frame — apply_salmon_dictionary","text":"Renames columns, coerces types, applies factor levels codes, reports mismatches. Returns transformed tibble ready analysis packaging.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/apply_salmon_dictionary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a salmon dictionary to a data frame — apply_salmon_dictionary","text":"","code":"apply_salmon_dictionary(df, dict, codes = NULL, strict = TRUE)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/apply_salmon_dictionary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a salmon dictionary to a data frame — apply_salmon_dictionary","text":"df data frame tibble transform dict validated dictionary tibble codes Optional tibble code lists (columns: dataset_id, table_id, column_name, code_value, code_label, etc.) strict Logical; TRUE (default), errors type coercion failures; FALSE, warns coerces character","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/apply_salmon_dictionary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a salmon dictionary to a data frame — apply_salmon_dictionary","text":"tibble renamed columns, coerced types, factor levels applied","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/apply_salmon_dictionary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply a salmon dictionary to a data frame — apply_salmon_dictionary","text":"","code":"if (FALSE) { # \\dontrun{ dict <- infer_dictionary(mtcars) validate_dictionary(dict) applied <- apply_salmon_dictionary(mtcars, dict) } # }"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/create_salmon_datapackage.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Salmon Data Package — create_salmon_datapackage","title":"Create a Salmon Data Package — create_salmon_datapackage","text":"Assembles Frictionless Data Package salmon-specific semantic fields (IRIs, concept schemes, etc.) writes resources plus datapackage.json disk.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/create_salmon_datapackage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Salmon Data Package — create_salmon_datapackage","text":"","code":"create_salmon_datapackage(   resources,   dataset_meta,   table_meta,   dict,   codes = NULL,   path,   format = \"csv\",   overwrite = FALSE )"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/create_salmon_datapackage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Salmon Data Package — create_salmon_datapackage","text":"resources Named list data frames/tibbles (one per resource) dataset_meta Tibble dataset-level metadata (one row) table_meta Tibble table-level metadata (one row per table) dict Dictionary tibble column definitions codes Optional tibble code lists path Character; directory path package written format Character; resource format: \"csv\" (default, format supported) overwrite Logical; FALSE (default), errors path exists","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/create_salmon_datapackage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Salmon Data Package — create_salmon_datapackage","text":"Invisibly returns path created package","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/create_salmon_datapackage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Salmon Data Package — create_salmon_datapackage","text":"","code":"if (FALSE) { # \\dontrun{ # Create a simple package resources <- list(main_table = mtcars) dataset_meta <- tibble::tibble(   dataset_id = \"test-1\",   title = \"Test Dataset\",   description = \"A test dataset\" ) table_meta <- tibble::tibble(   dataset_id = \"test-1\",   table_id = \"main_table\",   file_name = \"main_table.csv\",   table_label = \"Main Table\" ) dict <- infer_dictionary(mtcars, dataset_id = \"test-1\", table_id = \"main_table\") create_salmon_datapackage(   resources, dataset_meta, table_meta, dict,   path = tempdir() ) } # }"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_column_role.html","id":null,"dir":"Reference","previous_headings":"","what":"Infer column role from name and data — infer_column_role","title":"Infer column role from name and data — infer_column_role","text":"Infer column role name data","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_column_role.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Infer column role from name and data — infer_column_role","text":"","code":"infer_column_role(col_name, col)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_column_role.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Infer column role from name and data — infer_column_role","text":"col_name Column name col Column vector","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_column_role.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Infer column role from name and data — infer_column_role","text":"Character string indicating column role","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_dictionary.html","id":null,"dir":"Reference","previous_headings":"","what":"Infer a starter dictionary from a data frame — infer_dictionary","title":"Infer a starter dictionary from a data frame — infer_dictionary","text":"Proposes starter dictionary (column dictionary schema) raw data guessing column types, roles, basic metadata. IRIs semantic fields left blank manual GPT-assisted completion.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_dictionary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Infer a starter dictionary from a data frame — infer_dictionary","text":"","code":"infer_dictionary(   df,   guess_types = TRUE,   dataset_id = \"dataset-1\",   table_id = \"table-1\" )"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_dictionary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Infer a starter dictionary from a data frame — infer_dictionary","text":"df data frame tibble analyze guess_types Logical; TRUE (default), infer value types data dataset_id Character; dataset identifier (default: \"dataset-1\") table_id Character; table identifier (default: \"table-1\")","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_dictionary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Infer a starter dictionary from a data frame — infer_dictionary","text":"tibble dictionary schema columns: dataset_id, table_id, column_name, column_label, column_description, column_role, value_type, unit_label, unit_iri, metric_iri, dimension_iri, concept_scheme_iri, concept_iri, required","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_dictionary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Infer a starter dictionary from a data frame — infer_dictionary","text":"","code":"if (FALSE) { # \\dontrun{ df <- data.frame(   species = c(\"Coho\", \"Chinook\"),   count = c(100, 200),   date = as.Date(c(\"2024-01-01\", \"2024-01-02\")) ) dict <- infer_dictionary(df) } # }"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_value_type.html","id":null,"dir":"Reference","previous_headings":"","what":"Infer value type from a column — infer_value_type","title":"Infer value type from a column — infer_value_type","text":"Infer value type column","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_value_type.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Infer value type from a column — infer_value_type","text":"","code":"infer_value_type(col)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_value_type.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Infer value type from a column — infer_value_type","text":"col column vector","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/infer_value_type.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Infer value type from a column — infer_value_type","text":"Character string indicating value type","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/metasalmon.html","id":null,"dir":"Reference","previous_headings":"","what":"metasalmon: Salmon Monitoring Utilities — metasalmon","title":"metasalmon: Salmon Monitoring Utilities — metasalmon","text":"Package scaffold ingesting, validating, transforming, summarizing, visualizing salmon monitoring datasets. Functions data added incrementally.","code":""},{"path":[]},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/metasalmon.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"metasalmon: Salmon Monitoring Utilities — metasalmon","text":"Maintainer: Brett Johnson brettthomasjohnson@gmail.com","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/read_salmon_datapackage.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a Salmon Data Package — read_salmon_datapackage","title":"Read a Salmon Data Package — read_salmon_datapackage","text":"Loads Salmon Data Package disk, reading datapackage.json associated resource files, returning tibbles metadata analysis.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/read_salmon_datapackage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a Salmon Data Package — read_salmon_datapackage","text":"","code":"read_salmon_datapackage(path)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/read_salmon_datapackage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a Salmon Data Package — read_salmon_datapackage","text":"path Character; path directory containing datapackage.json","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/read_salmon_datapackage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read a Salmon Data Package — read_salmon_datapackage","text":"list components: dataset: Dataset metadata tibble tables: Table metadata tibble dictionary: Dictionary tibble (reconstructed schema) codes: Codes tibble (available) resources: Named list data tibbles","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/read_salmon_datapackage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read a Salmon Data Package — read_salmon_datapackage","text":"","code":"if (FALSE) { # \\dontrun{ # Read a package pkg <- read_salmon_datapackage(\"path/to/package\") pkg$resources$main_table } # }"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/suggest_semantics.html","id":null,"dir":"Reference","previous_headings":"","what":"Suggest semantic annotations for a dictionary — suggest_semantics","title":"Suggest semantic annotations for a dictionary — suggest_semantics","text":"Placeholder function future GPT/LLM heuristic-based suggestions IRIs, concept schemes, semantic annotations dictionary fields.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/suggest_semantics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Suggest semantic annotations for a dictionary — suggest_semantics","text":"","code":"suggest_semantics(df, dict)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/suggest_semantics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Suggest semantic annotations for a dictionary — suggest_semantics","text":"df data frame tibble dict dictionary tibble (may incomplete)","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/suggest_semantics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Suggest semantic annotations for a dictionary — suggest_semantics","text":"dictionary tibble unchanged (placeholder implementation)","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/suggest_semantics.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Suggest semantic annotations for a dictionary — suggest_semantics","text":"Currently returns dictionary unchanged message indicating semantic suggestion yet implemented.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/suggest_semantics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Suggest semantic annotations for a dictionary — suggest_semantics","text":"","code":"if (FALSE) { # \\dontrun{ dict <- infer_dictionary(mtcars) suggested <- suggest_semantics(mtcars, dict) } # }"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/validate_dictionary.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate a salmon data dictionary — validate_dictionary","title":"Validate a salmon data dictionary — validate_dictionary","text":"Validates dictionary tibble salmon data package schema. Checks required columns, value types, required flags, optionally validates IRIs. Reports issues using cli messaging.","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/validate_dictionary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate a salmon data dictionary — validate_dictionary","text":"","code":"validate_dictionary(dict, require_iris = FALSE)"},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/validate_dictionary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate a salmon data dictionary — validate_dictionary","text":"dict tibble data.frame dictionary schema columns require_iris Logical; TRUE, requires non-empty IRIs semantic fields (default: FALSE)","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/validate_dictionary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate a salmon data dictionary — validate_dictionary","text":"Invisibly returns normalized dictionary valid; otherwise raises errors clear messages","code":""},{"path":"https://dfo-pacific-science.github.io/metasalmon/reference/validate_dictionary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate a salmon data dictionary — validate_dictionary","text":"","code":"if (FALSE) { # \\dontrun{ dict <- infer_dictionary(mtcars) validate_dictionary(dict) } # }"}]
