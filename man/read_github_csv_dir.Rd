% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/github-helpers.R
\name{read_github_csv_dir}
\alias{read_github_csv_dir}
\title{Read all CSV files from a GitHub directory}
\usage{
read_github_csv_dir(
  path,
  ref = "main",
  repo = NULL,
  token = NULL,
  pattern = "\\\\.csv$",
  ...
)
}
\arguments{
\item{path}{Path to the directory inside the repository (e.g.,
\code{"data/observations"}), or a full GitHub URL pointing to a directory.
Trailing slashes are optional.}

\item{ref}{Git reference: branch name, tag, or commit SHA. Defaults to
\code{"main"}. For reproducible analyses, prefer tags or commit SHAs.
Ignored when \code{path} is already a full URL with a ref embedded.}

\item{repo}{Repository slug in \code{"owner/name"} form. Required when \code{path} is
a relative path; optional when \code{path} is a full URL.}

\item{token}{Optional GitHub PAT override. If \code{NULL} (default), uses the
token from \code{gh::gh_token()}, which is typically set by \code{ms_setup_github()}.}

\item{pattern}{Optional regular expression to filter CSV file names. Defaults
to \code{"\\\\.csv$"} (files ending in \code{.csv}). Set to \code{NULL} to match all files
in the directory (not just CSVs).}

\item{...}{Additional arguments passed to \code{readr::read_csv()} for each file,
such as \code{col_types}, \code{skip}, \code{n_max}, etc.}
}
\value{
A named list of tibbles, where names are the CSV file names (without
the \code{.csv} extension). Returns an empty list if no CSV files are found.
}
\description{
Lists all CSV files in a GitHub repository directory and reads them into a
named list of tibbles. Similar to using \code{dir()} with \code{lapply()} to read
multiple local CSV files.
}
\details{
This function uses the GitHub API to list directory contents, filters for CSV
files, then reads each file using \code{read_github_csv()}. Authentication is
required even for public repositories when using the API.

Before using this function, run \code{ms_setup_github()} once to configure
authentication. For private repositories, your PAT must have the \code{repo}
scope.

For reproducible analyses, pin to a specific tag or commit SHA rather than
a branch name like \code{"main"}, since branch contents can change over time.

\strong{Manual alternative}: You can achieve the same result by using \code{gh::gh()}
to list directory contents, filtering for CSV files, then looping through
them with \code{read_github_csv()}. See the vignette for an example.
}
\examples{
\dontrun{
# First, set up authentication (run once)
ms_setup_github(repo = "myorg/myrepo")

# Read all CSV files from a directory
data_list <- read_github_csv_dir("data/observations", repo = "myorg/myrepo")

# Access individual data frames by name
observations <- data_list$observations
metadata <- data_list$metadata

# Pin to a release tag for reproducibility
data_v1 <- read_github_csv_dir(
  "data/observations",
  ref = "v1.0.0",
  repo = "myorg/myrepo"
)

# Custom pattern to match specific files
subset <- read_github_csv_dir(
  "data",
  repo = "myorg/myrepo",
  pattern = "^obs_.*\\\\.csv$"
)

# Pass arguments to read_csv for all files
data_typed <- read_github_csv_dir(
  "data/observations",
  repo = "myorg/myrepo",
  col_types = "ccin"
)
}
}
\seealso{
\code{\link[=read_github_csv]{read_github_csv()}} for reading a single CSV file,
\code{\link[=ms_setup_github]{ms_setup_github()}} for authentication setup.
}
